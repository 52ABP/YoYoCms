(function(){"use strict";function n(n,t,i){var r=$(window);return{restrict:"E",templateUrl:"/app/admin/config/baSidebar/ba-sidebar.cshtml",controller:"BaSidebarCtrl",link:function(u,f){function e(r){i.isDescendant(f[0],r.target)||r.originalEvent.$sidebarEventProcessed||t.isMenuCollapsed()||!t.canSidebarBeHidden()||(r.originalEvent.$sidebarEventProcessed=!0,n(function(){t.setMenuCollapsed(!0)},10))}function o(){var n=t.shouldMenuBeCollapsed(),i=s();(n!=t.isMenuCollapsed()||u.menuHeight!=i)&&u.$apply(function(){u.menuHeight=i;t.setMenuCollapsed(n)})}function s(){return f[0].childNodes[0].clientHeight-84}u.menuHeight=f[0].childNodes[0].clientHeight-84;r.on("click",e);r.on("resize",o);u.$on("$destroy",function(){r.off("click",e);r.off("resize",o)})}}}yoyocmsModule.directive("baSidebar",n)})(),function(){"use strict";yoyocmsModule.provider("baSidebarService",[function(){var n=[];this.addStaticItem=function(){n.push.apply(n,arguments)};this.$get=function(t,i){function r(){function f(){return t.get().filter(function(n){return n.sidebarMeta}).map(function(n){var t=n.sidebarMeta;return{name:n.name,title:n.title,level:(n.name.match(/\./g)||[]).length,order:t.order,icon:t.icon,stateRef:n.name}}).sort(function(n,t){return(n.level-t.level)*100+n.order-t.order})}function u(){return window.innerWidth<=i.resWidthCollapseSidebar}function e(){return window.innerWidth<=i.resWidthHideSidebar}var r=u();this.getMenuItems=function(){var t=f(),i=t.filter(function(n){return n.level==0});return i.forEach(function(n){var i=t.filter(function(t){return t.level==1&&t.name.indexOf(n.name)===0});n.subMenu=i.length?i:null}),i.concat(n)};this.shouldMenuBeCollapsed=u;this.canSidebarBeHidden=e;this.setMenuCollapsed=function(n){r=n};this.isMenuCollapsed=function(){return r};this.toggleMenuCollapsed=function(){r=!r};this.getAllStateRefsRecursive=function(n){function i(n){n.items&&n.items.forEach(function(n){n.url&&t.push(n.url);i(n)})}var t=[];return i(n),t}}return new r}}])}(),function(){"use strict";yoyocmsModule.controller("BaSidebarCtrl",["$scope","baSidebarService",function(n,t){n.MainMenu=abp.nav.menus.MainMenu;n.con=function(){console.log("abp")};n.hoverItem=function(t){n.showHoverElem=!0;n.hoverElemHeight=t.currentTarget.clientHeight;n.hoverElemTop=t.currentTarget.getBoundingClientRect().top-66};n.$on("$stateChangeSuccess",function(){t.canSidebarBeHidden()&&t.setMenuCollapsed(!0)})}])}(),function(){"use strict";yoyocmsModule.directive("baSidebarToggleMenu",["baSidebarService",function(n){return{restrict:"A",link:function(t,i){i.on("click",function(i){i.originalEvent.$sidebarEventProcessed=!0;t.$apply(function(){n.toggleMenuCollapsed()})})}}}]).directive("baSidebarCollapseMenu",["baSidebarService",function(n){return{restrict:"A",link:function(t,i){i.on("click",function(i){i.originalEvent.$sidebarEventProcessed=!0;n.isMenuCollapsed()||t.$apply(function(){n.setMenuCollapsed(!0)})})}}}]).directive("baSidebarTogglingItem",["baSidebarService",function(){return{restrict:"A",controller:"BaSidebarTogglingItemCtrl"}}]).controller("BaSidebarTogglingItemCtrl",["$scope","$element","$attrs","$state","baSidebarService",function(n,t,i,r,u){function o(n){return n&&s.some(function(t){return n.name.indexOf(t)==0})}var f=this,e=f.$$menuItem=n.$eval(i.baSidebarTogglingItem),s;e&&e.items&&e.items.length&&(f.$$expandSubmenu=function(){console.warn("$$expandMenu should be overwritten by baUiSrefTogglingSubmenu")},f.$$collapseSubmenu=function(){console.warn("$$collapseSubmenu should be overwritten by baUiSrefTogglingSubmenu")},s=u.getAllStateRefsRecursive(e),f.$expand=function(){f.$$expandSubmenu();t.addClass("ba-sidebar-item-expanded")},f.$collapse=function(){f.$$collapseSubmenu();t.removeClass("ba-sidebar-item-expanded")},f.$toggle=function(){t.hasClass("ba-sidebar-item-expanded")?f.$collapse():f.$expand()},o(r.current)&&t.addClass("ba-sidebar-item-expanded"),n.$on("$stateChangeStart",function(n,i){!o(i)&&t.hasClass("ba-sidebar-item-expanded")&&(f.$collapse(),t.removeClass("ba-sidebar-item-expanded"))}),n.$on("$stateChangeSuccess",function(n,i){o(i)&&!t.hasClass("ba-sidebar-item-expanded")&&(f.$expand(),t.addClass("ba-sidebar-item-expanded"))}))}]).directive("baUiSrefTogglingSubmenu",["$state",function(){return{restrict:"A",require:"^baSidebarTogglingItem",link:function(n,t,i,r){r.$$expandSubmenu=function(){t.slideDown()};r.$$collapseSubmenu=function(){t.slideUp()}}}}]).directive("baUiSrefToggler",["baSidebarService",function(n){return{restrict:"A",require:"^baSidebarTogglingItem",link:function(t,i,r,u){i.on("click",function(){n.isMenuCollapsed()?(t.$apply(function(){n.setMenuCollapsed(!1)}),u.$expand()):u.$toggle()})}}}])}();